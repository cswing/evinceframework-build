
apply plugin: 'groovy'
apply from: "${rootProject.projectDir}/publish-maven.gradle"

group = 'com.evinceframework'
println "Building version: ${version}"

repositories {
   mavenCentral()
}

dependencies {
   compile gradleApi()
   //groovy localGroovy()
}

task sourcesJar(type: Jar, dependsOn:classes) {
	classifier = 'sources'
	from sourceSets.main.allGroovy
}

task groovydocJar(type: Jar, dependson: groovydoc) {
	classifier = 'groovydoc'
	from groovydoc
}

task javadocReadme(dependsOn: javadoc) << {
	
	file('build/docs/javadoc').mkdirs()
	
	File readme = file('build/docs/javadoc/README.md')
	readme.write("There is no JavaDoc.  See GroovyDoc.")
}

task javadocJar(type: Jar, dependsOn: javadocReadme) {
	classifier = 'javadoc'
	from 'build/docs/javadoc'
}

artifacts {
	archives jar
	
	archives groovydocJar
	archives javadocJar
	archives sourcesJar
}

task copyToLib(type: Sync) {
    into "${projectDir}/lib"
    from configurations.testCompile
}